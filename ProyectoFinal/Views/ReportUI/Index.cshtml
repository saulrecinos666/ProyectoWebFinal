@{
    ViewData["Title"] = "Generar Reportes";
}

<h1 class="mb-4">Generar Reportes</h1>

<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="fas fa-calendar-alt me-2"></i>Reporte de Citas Médicas</h4>
            </div>
            <div class="card-body">
                <form asp-controller="ReportUI" asp-action="GenerarReporteCitas" method="get">
                    @* <-- ¡CAMBIO AQUÍ! *@
                    <div class="mb-3">
                        <label for="fechaInicio" class="form-label">Fecha Inicio:</label>
                        <input type="date" class="form-control" id="fechaInicio" name="FechaInicio">
                    </div>
                    <div class="mb-3">
                        <label for="fechaFin" class="form-label">Fecha Fin:</label>
                        <input type="date" class="form-control" id="fechaFin" name="FechaFin">
                    </div>
                    <div class="mb-3">
                        <label for="doctorId" class="form-label">Doctor:</label>
                        <select class="form-select" id="doctorId" name="DoctorId">
                            <option value="">Todos los Doctores</option>
                            @foreach (var doctor in ViewBag.Doctors)
                            {
                                <option value="@doctor.DoctorId">@doctor.FullName</option>
                            }
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="patientId" class="form-label">Paciente:</label>
                        <select class="form-select" id="patientId" name="PatientId">
                            <option value="">Todos los Pacientes</option>
                            @foreach (var patient in ViewBag.Patients)
                            {
                                <option value="@patient.PatientId">@patient.FullName</option>
                            }
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="institutionId" class="form-label">Institución:</label>
                        <select class="form-select" id="institutionId" name="InstitutionId">
                            <option value="">Todas las Instituciones</option>
                            @foreach (var institution in ViewBag.Institutions)
                            {
                                <option value="@institution.InstitutionId">@institution.Name</option>
                            }
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="status" class="form-label">Estado de Cita:</label>
                        <select class="form-select" id="status" name="Status">
                            <option value="">Todos los Estados</option>
                            @* Asegúrate de que ViewBag.AppointmentStatuses esté poblando este select *@
                            @if (ViewBag.AppointmentStatuses != null)
                            {
                                foreach (var status in ViewBag.AppointmentStatuses)
                                {
                                    <option value="@status">@status</option>
                                }
                            }
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary w-100"><i class="fas fa-file-pdf me-2"></i> Generar Reporte de Citas</button>
                </form>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card shadow-sm">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0"><i class="fas fa-file-alt me-2"></i>Otros Reportes</h4>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a asp-controller="ReportUI" asp-action="GenerarReporteDoctores" class="btn btn-outline-success"><i class="fas fa-user-md me-2"></i> Reporte de Doctores</a> @* <-- ¡CAMBIO AQUÍ! *@
                    <a asp-controller="ReportUI" asp-action="GenerarReportePacientes" class="btn btn-outline-success"><i class="fas fa-procedures me-2"></i> Reporte de Pacientes</a> @* <-- ¡CAMBIO AQUÍ! *@
                    <a asp-controller="ReportUI" asp-action="GenerarReporteInstituciones" class="btn btn-outline-success"><i class="fas fa-hospital me-2"></i> Reporte de Instituciones</a> @* <-- ¡CAMBIO AQUÍ! *@
                    <a asp-controller="ReportUI" asp-action="GenerarReporteEspecialidades" class="btn btn-outline-success"><i class="fas fa-stethoscope me-2"></i> Reporte de Especialidades</a> @* <-- ¡CAMBIO AQUÍ! *@
                    <a asp-controller="ReportUI" asp-action="GenerarReporteUsuarios" class="btn btn-outline-success"><i class="fas fa-users-cog me-2"></i> Reporte de Usuarios</a> @* <-- ¡CAMBIO AQUÍ! *@
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Opcional: JavaScript para validar fechas o cualquier otra lógica de UI
        // Por ejemplo, asegurar que la fecha de inicio no sea posterior a la de fin.
    </script>
}